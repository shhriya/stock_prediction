import{u as g,j as e,B as n,F as i,S as c,T as x,C as p,L as u,a as j,g as m,b as h,c as f,r as L,H as b,d as w}from"./index-DVWpfKkn.js";const C=({taskInstance:r,wrap:o})=>{const{data:s,error:a,isLoading:t}=g({dagId:r.dag_id,logLevelFilters:["error","critical"],taskInstance:r,tryNumber:r.try_number},{refetchInterval:!1,retry:!1});return e.jsxs(n,{borderRadius:4,borderStyle:"solid",borderWidth:1,width:"100%",children:[e.jsxs(i,{alignItems:"center",justifyContent:"space-between",px:2,children:[e.jsxs(n,{children:[e.jsx(c,{mr:1,state:r.state}),r.task_display_name,e.jsx(x,{datetime:r.run_after,ml:1})]}),e.jsxs(i,{gap:1,children:[e.jsx(p,{taskInstance:r,withText:!1}),e.jsx(u,{asChild:!0,color:"fg.info",fontSize:"sm",children:e.jsx(j,{to:m(r),children:"View full logs"})})]})]}),e.jsx(n,{maxHeight:"100px",overflow:"auto",children:e.jsx(h,{error:a,isLoading:t,logError:a,parsedLogs:s.parsedLogs,wrap:o})})]},r.id)},y=({failedTasks:r})=>{const o=!!f("default_wrap"),[s,a]=L.useState(o),t=r==null?void 0:r.task_instances.slice(0,5),d=()=>a(!s);if(!(t===void 0||t.length<=0))return e.jsxs(i,{flexDirection:"column",gap:3,children:[e.jsxs(i,{alignItems:"center",justifyContent:"space-between",children:[e.jsx(b,{size:"md",children:"Recent Failed Task Logs"}),e.jsx(w,{"aria-label":s?"Unwrap":"Wrap",bg:"bg.panel",fontSize:"sm",onClick:d,size:"sm",variant:"outline",children:s?"Unwrap":"Wrap"})]}),t.map(l=>e.jsx(C,{taskInstance:l,wrap:s},l.id))]})};export{y as default};
